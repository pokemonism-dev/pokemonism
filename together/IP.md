https://datatracker.ietf.org/doc/html/rfc791

RFC: 791







                           인터넷 프로토콜


                         DARPA 인터넷 프로그램

                         프로토콜 사양



                             1981년 9월













                              준비된

               국방고등연구계획국
                정보처리기술국
                         1400 윌슨 블러바드
                       버지니아주 알링턴 22209







                                   ~에 의해

                     정보과학연구소
                   남부 캘리포니아 대학교
                           4676 애드미럴티 웨이
                   마리나 델 레이, 캘리포니아 90291



1981년 9월
인터넷 프로토콜



                           목차

    서문 ............................................................... iii

1. 서론 ................................................................. 1

1.1   동기 ................................................. 1
1.2   범위 ......................................................... 1
1.3   인터페이스 ................................................ 1
1.4   작동 ......................................................... 2

2. 개요 ................................................................. 5

2.1   다른 프로토콜과의 관계 ................................. 9
2.2   작동 모델 ................................................ 5
2.3   기능 설명 ........................................... 7
2.4   게이트웨이 ................................................ 9

3. 사양 ................................................. 11

3.1   인터넷 헤더 형식 .................................. 11
3.2   논의 ................................................ 23
3.3   인터페이스 ................................................ 31

부록 A: 예제 및 시나리오 .................................. 34
부록 B: 데이터 전송 순서 ................................. 39

용어집 ............................................................... 41

참고문헌 ............................................................... 45





















                                                                [페이지 i]

                                                          1981년 9월
인터넷 프로토콜






















































[2페이지]

1981년 9월
인터넷 프로토콜



                                머리말



이 문서는 DoD 표준 인터넷 프로토콜을 명시합니다.
이 문서는 ARPA 인터넷 프로토콜의 이전 6개 버전을 기반으로 합니다.
사양 및 현재 텍스트는 이러한 사양에서 많은 내용을 가져왔습니다.
이 작업에 개념과 측면에서 많은 기여를 했습니다.
텍스트의 관점에서. 이 판에서는 주소 지정, 오류의 측면을 수정했습니다.
처리, 옵션 코드 및 보안, 우선 순위, 구획 및
인터넷 프로토콜의 처리 제한 기능.

                                                           존 포스텔

                                                           편집자




































                                                              [3페이지]

                                                          1981년 9월


RFC: 791
대체:   RFC 760
IEN 128, 123, 111,
80, 54, 44, 41, 28, 26

                           인터넷 프로토콜

                         DARPA 인터넷 프로그램
                         프로토콜 사양



                            1. 서론

1.1 . 동기

인터넷 프로토콜은 상호 연결된 시스템에서 사용하도록 설계되었습니다.
패킷 교환 컴퓨터 통신 네트워크. 이러한 시스템은
"catenet"[ 1 ]이라고 불립니다. 인터넷 프로토콜은 다음을 제공합니다.
데이터그램이라고 하는 데이터 블록을 소스에서 전송합니다.
목적지, 여기서 소스와 목적지는 다음에 의해 식별되는 호스트입니다.
고정 길이 주소. 인터넷 프로토콜은 또한 다음을 제공합니다.
필요한 경우 긴 데이터그램의 단편화 및 재조립
"소규모 패킷" 네트워크를 통한 전송.

1.2 . 범위

인터넷 프로토콜은 특별히 범위를 제한하여 제공합니다.
비트 패키지를 전달하는 데 필요한 기능(인터넷
상호 연결된 시스템을 통해 소스에서 목적지까지 데이터그램)
네트워크의. 엔드 투 엔드 데이터를 증강할 수 있는 메커니즘이 없습니다.
신뢰성, 흐름 제어, 시퀀싱 또는 기타 서비스는 일반적으로
호스트 간 프로토콜에서 발견됩니다. 인터넷 프로토콜은 대문자로 시작할 수 있습니다.
다양한 유형을 제공하기 위해 지원 네트워크의 서비스에 대해
그리고 서비스의 질.

1.3 . 인터페이스

이 프로토콜은 인터넷의 호스트 간 프로토콜에 의해 호출됩니다.
환경. 이 프로토콜은 로컬 네트워크 프로토콜을 호출하여 다음을 수행합니다.
인터넷 데이터그램을 다음 게이트웨이 또는 대상 호스트로 전송합니다.

예를 들어, TCP 모듈은 인터넷 모듈을 호출하여 다음을 수행합니다.
TCP 세그먼트(TCP 헤더 및 사용자 데이터 포함)를 데이터로 사용
인터넷 데이터그램의 일부입니다. TCP 모듈은 다음을 제공합니다.
인터넷 헤더의 주소 및 기타 매개변수를 인터넷으로 전송
모듈을 호출의 인수로 사용합니다. 그러면 인터넷 모듈이
인터넷 데이터그램을 생성하고 로컬 네트워크 인터페이스를 호출합니다.
인터넷 데이터그램을 전송합니다.

예를 들어 ARPANET의 경우 인터넷 모듈은 다음을 호출합니다.


                                                                [1페이지]

                                                          1981년 9월
인터넷 프로토콜
소개


1822 리더[ 2 ]를 인터넷에
추가하는 로컬 넷 모듈
IMP에 전송할 ARPANET 메시지를 생성하는 데이터그램입니다.
ARPANET 주소는 인터넷 주소에서 파생됩니다.
로컬 네트워크 인터페이스이며 일부 호스트의 주소가 됩니다.
ARPANET, 그 호스트는 다른 네트워크로 가는 게이트웨이가 될 수도 있습니다.

1.4 . 작동

인터넷 프로토콜은 주소 지정 및
분열.

인터넷 모듈은 인터넷 헤더에 포함된 주소를 사용합니다.
인터넷 데이터그램을 목적지로 전송합니다.
전송 경로를 선택하는 것을 라우팅이라고 합니다.

인터넷 모듈은 인터넷 헤더의 필드를 사용하여 조각화하고
필요한 경우 인터넷 데이터그램을 다시 조립하여 전송합니다.
"소형 패킷" 네트워크.

작동 모델은 각 호스트에 인터넷 모듈이 상주한다는 것입니다.
인터넷 통신에 종사하고 있으며 각 게이트웨이에서
네트워크를 상호 연결합니다. 이러한 모듈은 다음과 같은 공통 규칙을 공유합니다.
주소 필드 해석 및 조각화 및 조립
인터넷 데이터그램. 또한 이러한 모듈(특히
게이트웨이)에는 라우팅 결정 및 기타 사항을 위한 절차가 있습니다.
기능.

인터넷 프로토콜은 각 인터넷 데이터그램을 독립적인 것으로 처리합니다.
다른 인터넷 데이터그램과 관련이 없는 엔터티입니다.
연결 또는 논리 회로(가상 또는 기타).

인터넷 프로토콜은 다음을 제공하는 데 4가지 핵심 메커니즘을 사용합니다.
서비스: 서비스 유형, 수명, 옵션 및 헤더 체크섬.

서비스 유형은 서비스의 품질을 나타내는 데 사용됩니다.
원하는 서비스 유형은 추상적이거나 일반화된 집합입니다.
제공되는 서비스 선택을 특징짓는 매개변수
인터넷을 구성하는 네트워크. 이러한 유형의 서비스 표시
게이트웨이에서 실제 전송 매개변수를 선택하는 데 사용됩니다.
특정 네트워크의 경우 다음 홉에 사용될 네트워크 또는
인터넷 데이터그램을 라우팅할 때의 다음 게이트웨이.

수명은 수명의 상한을 나타냅니다.
인터넷 데이터그램. 데이터그램을 보낸 사람이 설정합니다.
처리되는 경로를 따라 지점에서 감소합니다.
인터넷 데이터그램이 도달하기 전에 수명 시간이 0에 도달합니다.
목적지, 인터넷 데이터그램이 파괴됩니다. TTL(수명)은 다음과 같습니다.
자폭 시간 제한으로 생각하세요.


[2페이지]

1981년 9월
인터넷 프로토콜
소개



옵션은 일부에 필요하거나 유용한 제어 기능을 제공합니다.
상황에서는 필요하지만 가장 일반적인 통신에는 필요하지 않습니다.
옵션에는 타임스탬프, 보안 및 특수 조항이 포함됩니다.
라우팅.

헤더 체크섬은 사용된 정보가 검증되었음을 제공합니다.
인터넷 데이터그램을 처리하는 동안 올바르게 전송되었습니다.
데이터에 오류가 있을 수 있습니다. 헤더 체크섬이 실패하면 인터넷
오류를 감지한 엔터티는 데이터그램을 즉시 삭제합니다.

인터넷 프로토콜은 안정적인 통신을 제공하지 않습니다.
시설. 엔드 투 엔드 또는
홉 바이 홉. 데이터에 대한 오류 제어는 없고 헤더만 있습니다.
체크섬이 없습니다. 재전송도 없고, 흐름 제어도 없습니다.

감지된 오류는 인터넷 제어 메시지를 통해 보고될 수 있습니다.인터넷 프로토콜에 구현된
프로토콜(ICMP) [ 3 ]
기준 치수.
































                                                                [3페이지]

                                                          1981년 9월
인터넷 프로토콜






















































[4페이지]

1981년 9월
인터넷 프로토콜



                              2. 개요

2.1 . 다른 프로토콜과의 관계

다음 다이어그램은 인터넷 프로토콜의 위치를 ​​보여줍니다.
프로토콜 계층에서:


                 +------+ +-----+ +-----+ +-----+
                 |텔넷| | FTP | | TFTP| ... | ... |
                 +------+ +-----+ +-----+ +-----+
                       | | | |
                      +-----+ +-----+ +-----+
                      | TCP | | UDP | ... | ... |
                      +-----+ +-----+ +-----+
                         | | |
                      +--------------------------+----+
                      | 인터넷 프로토콜 및 ICMP |
                      +--------------------------+----+
                                     |
                        +---------------------------+
                        | 로컬 네트워크 프로토콜 |
                        +---------------------------+

                         프로토콜 관계

                               그림 1.

상위 레벨의 한쪽에 있는 인터넷 프로토콜 인터페이스
호스트 간 프로토콜 및 로컬 네트워크의 반대편
프로토콜. 이 맥락에서 "로컬 네트워크"는 소규모 네트워크일 수 있습니다.
건물이나 ARPANET과 같은 대규모 네트워크.

2.2 . 운영 모델

한 곳에서 데이터그램을 전송하기 위한 작동 모델
다른 응용 프로그램에 대한 응용 프로그램은 다음과 같이 설명됩니다.
대본:

    우리는 이 전송이 하나의 중간 단계를 포함할 것이라고 가정합니다.
    게이트웨이.

    전송 응용 프로그램은 데이터를 준비하고 이를 호출합니다.
    로컬 인터넷 모듈은 해당 데이터를 데이터그램으로 전송하고 전달합니다.
    호출의 인수로 대상 주소 및 기타 매개변수를 사용합니다.

    인터넷 모듈은 데이터그램 헤더를 준비하고 데이터를 첨부합니다.
    그것에. 인터넷 모듈은 로컬 네트워크 주소를 결정합니다.
    이 인터넷 주소는 이 경우 게이트웨이의 주소입니다.


                                                                [5페이지]

                                                          1981년 9월
인터넷 프로토콜
개요



    이 데이터그램과 로컬 네트워크 주소를 로컬로 전송합니다.
    네트워크 인터페이스.

    로컬 네트워크 인터페이스는 로컬 네트워크 헤더를 생성하고
    데이터그램을 첨부한 다음 로컬을 통해 결과를 보냅니다.
    회로망.

    데이터그램은 로컬 네트워크에 래핑된 게이트웨이 호스트에 도착합니다.
    헤더, 로컬 네트워크 인터페이스는 이 헤더를 제거합니다.
    데이터그램을 인터넷 모듈로 넘깁니다. 인터넷 모듈
    인터넷 주소에서 데이터그램이 무엇인지 확인합니다.
    두 번째 네트워크의 다른 호스트로 전달됩니다. 인터넷 모듈
    대상 호스트에 대한 로컬 네트워크 주소를 결정합니다. 호출합니다.
    해당 네트워크의 로컬 네트워크 인터페이스에서 다음을 보냅니다.
    데이터그램.

    이 로컬 네트워크 인터페이스는 로컬 네트워크 헤더를 생성합니다.
    결과를 대상 호스트로 보내는 데이터그램을 첨부합니다.

    이 목적지 호스트에서 데이터그램은 로컬 네트워크에서 제거됩니다.
    로컬 네트워크 인터페이스에 의해 헤더가 전달되고 인터넷에 전달됨
    기준 치수.

    인터넷 모듈은 데이터그램이 다음을 위한 것임을 확인합니다.
    이 호스트의 응용 프로그램. 데이터를 다음 호스트로 전달합니다.
    시스템 호출에 응답하여 소스를 전달하는 애플리케이션 프로그램
    호출의 결과로 주소 및 기타 매개변수가 제공됩니다.


신청서 신청서
프로그램 프로그램
\ /
인터넷 모듈 인터넷 모듈 인터넷 모듈
\ / \ /
LNI-1 LNI-1 LNI-2 LNI-2
\ / \ /
로컬 네트워크 1 로컬 네트워크 2



                            전송 경로

                                그림 2







[6페이지]

1981년 9월
인터넷 프로토콜
개요



2.3 . 함수 설명

인터넷 프로토콜의 기능 또는 목적은 데이터그램을 이동하는 것입니다.
상호 연결된 네트워크 세트를 통해. 이는 다음을 통해 수행됩니다.
한 인터넷 모듈에서 다른 인터넷 모듈로 데이터그램이 전송될 때까지
목적지에 도달했습니다. 인터넷 모듈은 호스트에 있습니다.
인터넷 시스템의 게이트웨이. 데이터그램은 하나에서 라우팅됩니다.
개별 네트워크를 기반으로 다른 인터넷 모듈로 연결
인터넷 주소의 해석. 따라서 중요한 메커니즘 중 하나는
인터넷 프로토콜의 주소는 인터넷 주소입니다.

한 인터넷 모듈에서 다른 인터넷 모듈로 메시지를 라우팅할 때,
데이터그램은 최대 패킷 크기가 있는 네트워크를 통과해야 할 수도 있습니다.
데이터그램 크기보다 작습니다. 이 어려움을 극복하기 위해
인터넷 프로토콜에는 단편화 메커니즘이 제공됩니다.

주소 지정

    이름, 주소 및 경로 사이에 구별이 있습니다[ 4 ].
    이름은 우리가 찾는 것을 나타냅니다. 주소는 그것이 어디에 있는지를 나타냅니다.
    경로는 해당 위치에 도달하는 방법을 나타냅니다. 인터넷 프로토콜은 다음과 같습니다.
    주로 주소와 함께 사용됩니다. 이는 상위 레벨(즉,
    호스트 간 또는 애플리케이션 간 프로토콜을 사용하여 매핑을 수행합니다.
    이름을 주소로 매핑합니다. 인터넷 모듈은 인터넷 주소를
    로컬 네트워크 주소입니다. 이는 하위 레벨(즉, 로컬 네트워크)의 작업입니다.
    또는 게이트웨이) 로컬 네트워크 주소에서 매핑을 만드는 절차
    경로로.

    주소는 4옥텟(32비트)의 고정 길이입니다. 주소
    네트워크 번호로 시작하고 그 뒤에 로컬 주소(로컬 주소라고 함)가 옵니다.
    "rest" 필드). 인터넷에는 세 가지 형식 또는 클래스가 있습니다.
    주소: 클래스 a에서 상위 비트는 0이고 다음 7비트는
    네트워크이고 마지막 24비트는 로컬 주소입니다.
    클래스 b, 상위 2비트는 1-0이고 다음 14비트는
    네트워크와 마지막 16비트는 로컬 주소입니다. 클래스 c에서는
    상위 3비트는 1-1-0이고 다음 21비트는
    네트워크이고 마지막 8비트는 로컬 주소입니다.

    인터넷 주소를 로컬 네트워크에 매핑할 때는 주의해야 합니다.
    주소; 단일 물리적 호스트는 마치 다음과 같이 작동할 수 있어야 합니다.
    여러 개의 서로 다른 호스트를 사용하는 정도까지
    인터넷 주소. 일부 호스트는 여러 개의 물리적 주소도 가지고 있습니다.
    인터페이스(멀티호밍).

    즉, 호스트가 여러 개의 물리적인 공간을 가질 수 있도록 조치를 취해야 합니다.
    각각 여러 개의 논리적 인터넷이 있는 네트워크 인터페이스
    구애.



                                                                [7페이지]

                                                          1981년 9월
인터넷 프로토콜
개요


주소 매핑의 예는 "주소 매핑"[ 5 ]
에서 찾을 수 있습니다 .

분열

    인터넷 데이터그램의 조각화는 다음과 같은 경우에 필요합니다.
    대용량 패킷 크기를 허용하는 로컬 네트워크에서 시작되며
    패킷 크기를 더 작게 제한하는 로컬 네트워크를 통과하여 도달합니다.
    목적지.

    인터넷 데이터그램은 "조각화하지 마십시오"로 표시될 수 있습니다. 모든 인터넷
    이렇게 표시된 데이터그램은 어떠한 경우에도 인터넷 조각화되지 않습니다.
    상황. 인터넷 데이터그램이 조각화되지 않은 것으로 표시된 경우
    그것을 조각내지 않고 목적지에 전달하려면
    대신 버려졌습니다.

    로컬 네트워크에서의 분할, 전송 및 재조립
    인터넷 프로토콜 모듈에서는 보이지 않는 것을 호출합니다.
    인트라넷 분할이 사용될 수 있습니다[ 6 ].

    인터넷 분할 및 재조립 절차는 다음과 같아야 합니다.
    데이터그램을 거의 임의의 수의 조각으로 나누는 것
    나중에 다시 조립할 수 있습니다. 조각의 수신자는 다음을 사용합니다.
    다양한 데이터그램의 조각을 보장하기 위한 식별 필드
    혼합되지 않습니다. 조각 오프셋 필드는 수신기에 다음을 알려줍니다.
    원본 데이터그램에서 조각의 위치. 조각
    오프셋과 길이는 원래 데이터그램의 부분을 결정합니다.
    이 조각으로 덮여 있습니다. more-fragments 플래그는 (by)를 나타냅니다.
    마지막 조각이 재설정됩니다. 이러한 필드는 충분한
    데이터그램을 재조립하기 위한 정보.

    식별 필드는 하나의 조각을 구별하는 데 사용됩니다.
    다른 프로토콜 모듈의 데이터그램.
    인터넷 데이터그램은 식별 필드를 값으로 설정합니다.
    해당 소스-대상 쌍과 프로토콜에 대해 고유해야 합니다.
    데이터그램이 인터넷 시스템에서 활성화되는 시간입니다.
    완전한 데이터그램의 발신 프로토콜 모듈은 다음을 설정합니다.
    more-fragments 플래그를 0으로 설정하고, 프래그먼트 오프셋을 0으로 설정합니다.

    긴 인터넷 데이터그램을 조각화하려면 인터넷 프로토콜 모듈이 필요합니다.
    (예를 들어, 게이트웨이에서) 두 개의 새로운 인터넷 데이터그램을 생성합니다.
    긴 인터넷 헤더 필드의 내용을 복사합니다.
    두 개의 새로운 인터넷 헤더에 데이터그램을 넣습니다. 긴 데이터
    데이터그램은 8옥텟(64비트) 경계에서 두 부분으로 나뉩니다.
    (두 번째 부분은 8옥텟의 정수배가 아닐 수도 있습니다.
    하지만 첫 번째는 반드시 8옥텟 블록의 수를 호출합니다.
    첫 번째 부분 NFB(조각 블록 수). 첫 번째
    데이터의 일부는 첫 번째 새로운 인터넷 데이터그램에 배치됩니다.
    그리고 총 길이 필드는 첫 번째 길이로 설정됩니다.


[8페이지]

1981년 9월
인터넷 프로토콜
개요



    데이터그램. more-fragments 플래그가 1로 설정됩니다. 두 번째
    데이터의 일부는 두 번째 새로운 인터넷 데이터그램에 배치됩니다.
    그리고 총 길이 필드는 두 번째 길이로 설정됩니다.
    데이터그램. more-fragments 플래그는 다음과 같은 값을 갖습니다.
    긴 데이터그램. 두 번째 새로운 인터넷의 조각 오프셋 필드
    데이터그램은 긴 데이터그램의 해당 필드 값에 더해 설정됩니다.
    NFB.

    이 절차는 n-way 분할에 대해 일반화될 수 있습니다.
    설명된 두 가지 분할.

    인터넷 데이터그램의 조각을 조립하려면 인터넷
    프로토콜 모듈(예: 대상 호스트)은 다음을 결합합니다.
    4개 필드에 대해 모두 동일한 값을 갖는 인터넷 데이터그램:
    식별, 소스, 목적지 및 프로토콜. 조합
    각 조각의 데이터 부분을 상대 위치에 배치하여 수행됩니다.
    해당 조각의 조각 오프셋에 의해 표시된 위치
    인터넷 헤더. 첫 번째 조각에는 조각 오프셋이 있습니다.
    0이고 마지막 조각에는 more-fragments 플래그가 재설정됩니다.
    0으로.

2.4 . 게이트웨이

게이트웨이는 인터넷 프로토콜을 구현하여 데이터그램을 전달합니다.
네트워크. 게이트웨이는 또한 게이트웨이 간 프로토콜을 구현합니다.
(GGP) [ 7 ] 라우팅 및 기타 인터넷 제어를 조정합니다.
정보.

게이트웨이에서는 상위 레벨 프로토콜을 구현할 필요가 없습니다.
GGP 기능이 IP 모듈에 추가되었습니다.


                   +-------------------------------+
                   | 인터넷 프로토콜 & ICMP & GGP|
                   +-------------------------------+
                           | |
                 +---------------+ +---------------+
                 | 로컬 네트 | | 로컬 네트 |
                 +---------------+ +---------------+

                           게이트웨이 프로토콜

                               그림 3.







                                                                [9페이지]

                                                          1981년 9월
인터넷 프로토콜






















































[10페이지]

1981년 9월
인터넷 프로토콜



                           3. 사양

3.1 . 인터넷 헤더 형식

인터넷 헤더의 내용을 요약하면 다음과 같습니다.


    0 1 2 3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|버전| IHL |서비스 유형| 총 길이 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 식별 | 플래그 | 조각 오프셋 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 수명(Time to Live) | 프로토콜 | 헤더 체크섬 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 소스 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 목적지 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 옵션 | 패딩 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    인터넷 데이터그램 헤더 예시

                               그림 4.

각 눈금 표시는 하나의 비트 위치를 나타냅니다.

버전: 4비트

    버전 필드는 인터넷 헤더의 형식을 나타냅니다.
    이 문서에서는 버전 4에 대해 설명합니다.

국제인도법: 4비트

    인터넷 헤더 길이는 32비트로 표현된 인터넷 헤더의 길이입니다.
    비트 단어이므로 데이터의 시작 부분을 가리킵니다.
    올바른 헤더의 최소값은 5입니다.












                                                               [11페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



서비스 유형: 8비트

    서비스 유형은 추상적인 내용을 나타냅니다.
    원하는 서비스 품질의 매개변수입니다. 이러한 매개변수는 다음과 같습니다.
    실제 서비스 매개변수 선택을 안내하는 데 사용됩니다.
    특정 네트워크를 통해 데이터그램을 전송할 때. 여러
    네트워크는 어떻게든 높은 수준의 서비스를 우선적으로 처리합니다.
    다른 트래픽보다 우선 순위 트래픽이 더 중요합니다(일반적으로
    높은 우선순위를 가진 트래픽만 허용함으로써
    부하). 주요 선택은 저지연,
    높은 신뢰성과 높은 처리량.

      비트 0-2: 우선순위.
      비트 3: 0 = 일반 지연, 1 = 낮은 지연.
      비트 4: 0 = 일반 처리량, 1 = 높은 처리량.
      비트 5: 0 = 일반 신뢰성, 1 = 높은 신뢰성.
      비트 6-7: 향후 사용을 위해 예약됨.

         0 1 2 3 4 5 6 7
      +-----+-----+-----+-----+-----+-----+-----+-----+
      | | | | | | |
      | 우선순위 | D | T | R | 0 | 0 |
      | | | | | | |
      +-----+-----+-----+-----+-----+-----+-----+-----+

        상위

          111 - 네트워크 제어
          110 - 인터네트워크 제어
          101 - 비평가/ECP
          100 - 플래시 오버라이드
          011 - 플래시
          010 - 즉시
          001 - 우선순위
          000 - 루틴

    지연, 처리량 및 안정성 표시를 사용하면
    서비스 비용을 (어떤 의미에서) 증가시킵니다. 많은 네트워크에서
    이러한 매개변수 중 하나에 대한 더 나은 성능은 더 나쁜 것과 결합됩니다.
    다른 성능. 최대 두 개의 매우 특이한 경우를 제외하고
    이 세 가지 표시 중 하나를 설정해야 합니다.

    서비스 유형은 데이터그램의 처리를 지정하는 데 사용됩니다.
    인터넷 시스템을 통한 전송 중. 예
    인터넷 서비스 유형을 실제 서비스에 매핑
    AUTODIN II, ARPANET, SATNET, PRNET 등의 네트워크에서 제공됨"서비스 매핑"[ 8 ] 
    에 나와 있습니다 .



[12페이지]

1981년 9월
인터넷 프로토콜
사양



    네트워크 제어 우선 순위 지정은 다음 용도로 사용됩니다.
    네트워크 내에서만 가능합니다. 해당 기능의 실제 사용 및 제어
    지정은 각 네트워크에 따라 다릅니다. 인터네트워크 제어
    이 지정은 게이트웨이 제어 발신자만 사용하도록 의도되었습니다.
    이러한 우선 순위 지정의 실제 사용이 우려되는 경우
    특정 네트워크의 경우 해당 네트워크의 책임이 있습니다.
    해당 우선순위 지정에 대한 접근 및 사용을 제어합니다.

총 길이: 16비트

    총 길이는 옥텟 단위로 측정된 데이터그램의 길이입니다.
    인터넷 헤더와 데이터를 포함합니다. 이 필드는 길이를 허용합니다.
    최대 65,535옥텟의 데이터그램. 이러한 긴 데이터그램은
    대부분의 호스트와 네트워크에서는 비실용적입니다. 모든 호스트는 준비되어야 합니다.
    최대 576옥텟의 데이터그램을 수락합니다(전체가 도착하든
    또는 조각으로). 호스트는 데이터그램만 보내는 것이 좋습니다.
    목적지가 576옥텟보다 큰 경우 보장됩니다.
    더 큰 데이터그램을 수용할 준비가 되었습니다.

    숫자 576은 적절한 크기의 데이터 블록을 허용하기 위해 선택되었습니다.
    필수 헤더 정보 외에 전송됩니다.
    예를 들어, 이 크기는 512옥텟의 데이터 블록과 64개의 헤더를 허용합니다.
    데이터그램에 맞는 옥텟. 최대 인터넷 헤더는 60입니다.
    옥텟이며 일반적인 인터넷 헤더는 20옥텟으로 다음을 허용합니다.
    상위 레벨 프로토콜의 헤더를 위한 여백.

식별: 16비트

    보낸 사람이 조립을 돕기 위해 할당한 식별 값
    데이터그램의 조각.

플래그: 3비트

    다양한 제어 플래그.

      비트 0: 예약됨, 0이어야 함
      비트 1: (DF) 0 = 조각화 가능, 1 = 조각화 안 함.
      비트 2: (MF) 0 = 마지막 조각, 1 = 추가 조각.

          0 1 2
        +---+---+---+
        | | 디 | 엠 |
        | 0 | 에프 | 에프 |
        +---+---+---+

프래그먼트 오프셋: 13비트

    이 필드는 데이터그램에서 이 조각이 어디에 속하는지 나타냅니다.


                                                               [13페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



    조각 오프셋은 8옥텟(64비트) 단위로 측정됩니다.
    첫 번째 조각의 오프셋은 0입니다.

수명(Time to Live): 8비트

    이 필드는 데이터그램이 허용되는 최대 시간을 나타냅니다.
    인터넷 시스템에 남아 있습니다. 이 필드에 값이 포함되어 있는 경우
    0이면 데이터그램을 파기해야 합니다. 이 필드는 수정됩니다.
    인터넷 헤더 처리에서 시간은 단위로 측정됩니다.
    초이지만 데이터그램을 처리하는 모든 모듈은
    데이터그램을 처리하더라도 TTL을 최소한 하나만큼 줄이십시오.
    1초 미만인 경우 TTL은 상위로만 생각해야 합니다.
    데이터그램이 존재할 수 있는 시간에 바인딩됩니다. 의도는 다음과 같습니다.
    전달할 수 없는 데이터그램을 삭제하고 최대값을 제한합니다.
    데이터그램 수명.

프로토콜: 8비트

    이 필드는 데이터에서 사용되는 다음 레벨 프로토콜을 나타냅니다.
    인터넷 데이터그램의 일부입니다. 다양한 프로토콜에 대한 값
    "할당된 번호"[ 9 ]에 지정되어 있습니다.

헤더 체크섬: 16비트

    헤더에만 체크섬이 있습니다. 일부 헤더 필드가 변경되므로
    (예: 수명) 이는 각 지점에서 다시 계산되고 검증됩니다.
    인터넷 헤더가 처리됩니다.

    체크섬 알고리즘은 다음과 같습니다.

      체크섬 필드는 1의 보수인 16비트입니다.
      헤더의 모든 16비트 단어의 보수 합입니다.
      체크섬을 계산할 때 체크섬 필드의 값은 0입니다.

    이것은 계산하기 쉬운 체크섬과 실험적 증거입니다.
    적절함을 나타내지만 임시적이며 교체될 수 있습니다.
    추후 경험에 따라 CRC 절차를 거쳐야 합니다.

소스 주소: 32비트

    소스 주소입니다. 3.2절을 참조하세요 .

목적지 주소: 32비트

    목적지 주소입니다. 3.2절을 참조하세요 .





[14페이지]

1981년 9월
인터넷 프로토콜
사양



옵션: 변수

    옵션은 데이터그램에 나타날 수도 있고 나타나지 않을 수도 있습니다.
    모든 IP 모듈(호스트 및 게이트웨이)에 의해 구현됩니다. 선택 사항은 무엇입니까?
    그들의 전송은 특정 데이터그램에 있는 것이 아니라
    구현.

    일부 환경에서는 모든 보안 옵션이 필요할 수 있습니다.
    데이터그램.

    옵션 필드의 길이는 가변적입니다. 0개 이상이 있을 수 있습니다.
    옵션. 옵션 형식에는 두 가지 경우가 있습니다.

      사례 1: 옵션 유형의 단일 옥텟.

      사례 2: 옵션 유형 옥텟, 옵션 길이 옥텟 및
               실제 옵션 데이터 옥텟.

    옵션 길이 옥텟은 옵션 유형 옥텟과
    옵션 길이 옥텟과 옵션 데이터 옥텟.

    옵션 유형 옥텟은 3개의 필드를 갖는 것으로 간주됩니다.

      1비트 복사 플래그,
      2비트 옵션 클래스,
      5비트 옵션 번호.

    복사된 플래그는 이 옵션이 모든 항목에 복사되었음을 나타냅니다.
    단편화에 대한 단편화.

      0 = 복사되지 않음
      1 = 복사됨

    옵션 클래스는 다음과 같습니다.

      0 = 제어
      1 = 향후 사용을 위해 예약됨
      2 = 디버깅 및 측정
      3 = 향후 사용을 위해 예약됨











                                                               [15페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



    다음 인터넷 옵션이 정의되어 있습니다.

      학급 번호 길이 설명
      ----- ------ ------ -----------
        0 0 - 옵션 목록 끝. 이 옵션은 다음 항목만 차지합니다.
                          1 옥텟입니다. 옥텟 길이가 없습니다.
        0 1 - 작업 없음. 이 옵션은 1만 차지합니다.
                          옥텟; 옥텟 길이가 없습니다.
        0 2 11 보안. 보안을 수행하는 데 사용됩니다.
                          구획화, 사용자 그룹(TCC) 및
                          DOD와 호환되는 제한 코드 처리
                          요구사항.
        0 3 var. 느슨한 소스 라우팅. 라우팅하는 데 사용됩니다.
                          정보 기반 인터넷 데이터그램
                          출처에서 제공됨.
        0 9 var. Strict Source Routing. 라우팅에 사용됨
                          정보 기반 인터넷 데이터그램
                          출처에서 제공됨.
        0 7 var. 경로 기록. 경로를 추적하는 데 사용됩니다.
                          인터넷 데이터그램이 필요합니다.
        0 8 4 스트림 ID. 스트림을 전달하는 데 사용됩니다.
                          식별자.
        2 4 변수 인터넷 타임스탬프.



    특정 옵션 정의

      옵션 목록 끝

        +--------+
        |00000000|
        +--------+
          유형=0

        이 옵션은 옵션 목록의 끝을 나타냅니다.
        인터넷 헤더의 끝과 일치하지 않음
        인터넷 헤더 길이. 이는 모든 헤더의 끝에 사용됩니다.
        옵션은 각 옵션의 끝이 아니며 다음과 같은 경우에만 사용해야 합니다.
        그렇지 않으면 옵션의 끝은 끝과 일치하지 않습니다.
        인터넷 헤더의.

        조각화 시 복사, 도입 또는 삭제될 수 있습니다.
        그 밖의 이유.






[16페이지]

1981년 9월
인터넷 프로토콜
사양



      작동 없음

        +--------+
        |00000001|
        +--------+
          유형=1

        이 옵션은 옵션 사이에서 사용할 수 있습니다. 예를 들어 정렬할 수 있습니다.
        32비트 경계에서 후속 옵션의 시작.

        조각화 시 복사, 도입 또는 삭제될 수 있습니다.
        그 밖의 이유.

      보안

        이 옵션은 호스트가 보안을 보낼 수 있는 방법을 제공합니다.
        구획화, 취급 제한 및 TCC(폐쇄형 사용자)
        그룹) 매개변수입니다. 이 옵션의 형식은 다음과 같습니다.

          +--------+--------+---//---+---//---+---//---+---//---+
          |10000010|00001011|SSS SSS|CCC CCC|HHH HHH| TCC |
          +--------+--------+---//---+---//---+---//---+---//---+
           유형=130 길이=11

        보안(S 필드): 16비트

          16가지 보안 수준 중 하나를 지정합니다(그 중 8가지는 다음과 같습니다.
          (나중에 사용하기 위해 예약됨).

            00000000 00000000 - 미분류
            11110001 00110101 - 기밀
            01111000 10011010 - EFTO
            10111100 01001101 - 음음
            01011110 00100110 - 프로그램
            10101111 00010011 - 제한됨
            11010111 10001000 - 비밀
            01101011 11000101 - 극비
            00110101 11100010 - (향후 사용을 위해 예약됨)
            10011010 11110001 - (향후 사용을 위해 예약됨)
            01001101 01111000 - (향후 사용을 위해 예약됨)
            00100100 10111101 - (향후 사용을 위해 예약됨)
            00010011 01011110 - (향후 사용을 위해 예약됨)
            10001001 10101111 - (향후 사용을 위해 예약됨)
            11000100 11010110 - (향후 사용을 위해 예약됨)
            11100010 01101011 - (향후 사용을 위해 예약됨)





                                                               [17페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



        구획(C 필드): 16비트

          전송된 정보가 다음과 같은 경우 모두 0 값이 사용됩니다.
          구획화되지 않음. 구획 필드에 대한 다른 값
          국방정보국에서 얻을 수 있습니다.

        처리 제한(H 필드): 16비트

          제어 및 릴리스 표시의 값은 다음과 같습니다.
          영숫자 이중자음은 국방부에서 정의됩니다.
          정보 기관 매뉴얼 DIAM 65-19, "표준 보안
          표시".

        전송 제어 코드(TCC 필드): 24비트

          교통을 분리하고 통제된 것을 정의하는 수단을 제공합니다.
          구독자 간 관심 커뮤니티. TCC 값은 다음과 같습니다.
          삼중자음은 HQ DCA 코드 530에서 구할 수 있습니다.

        조각화 시 복사해야 합니다. 이 옵션은 최대
        데이터그램에 한 번.

      느슨한 소스 및 레코드 경로

        +--------+--------+--------+--------//--------+
        |10000011| 길이 | 포인터| 경로 데이터 |
        +--------+--------+--------+--------//--------+
         유형=131

        LSRR(Loose Source and Record Route) 옵션은 다음 수단을 제공합니다.
        인터넷 데이터그램의 소스가 라우팅을 제공하기 위해
        게이트웨이가 전달하는 데 사용할 정보
        목적지로 데이터그램을 보내고 경로를 기록합니다.
        정보.

        옵션은 옵션 유형 코드로 시작합니다. 두 번째 옥텟은
        옵션 유형 코드와 옵션 길이를 포함하는 옵션 길이입니다.
        길이 옥텟, 포인터 옥텟, 경로의 길이-3 옥텟
        데이터. 세 번째 옥텟은 경로 데이터를 가리키는 포인터입니다.
        다음 소스 주소의 시작 옥텟을 나타냅니다.
        처리되었습니다. 포인터는 이 옵션을 기준으로 하며
        포인터의 최소 합법적 값은 4입니다.

        경로 데이터는 일련의 인터넷 주소로 구성됩니다.
        각 인터넷 주소는 32비트 또는 4옥텟입니다. 포인터가
        길이보다 크면 소스 경로가 비어 있습니다(그리고
        기록된 경로가 가득 찼으며 경로는 다음을 기반으로 합니다.
        목적지 주소 필드.


[18페이지]

1981년 9월
인터넷 프로토콜
사양



        목적지 주소 필드에 있는 주소에 도달한 경우
        포인터가 길이보다 크지 않으면 다음 주소는
        소스 경로는 대상 주소의 주소를 대체합니다.
        필드 및 기록된 경로 주소가 소스를 대체합니다.
        방금 사용한 주소이고, 포인터는 4만큼 증가합니다.

        기록된 경로 주소는 인터넷 모듈 자체의 인터넷 주소입니다.
        이 데이터그램이 있는 환경에서 알려진 주소
        전달 중입니다.

        소스 경로를 기록된 경로로 대체하는 이 절차
        경로(순서와는 반대이지만)
        소스 경로로 사용됨)은 옵션(및 IP 헤더)을 의미합니다.
        데이터그램이 진행됨에 따라 전체 길이가 일정하게 유지됩니다.
        인터넷을 통해서.

        이 옵션은 게이트웨이 또는 호스트가 느슨한 소스 경로이기 때문에
        IP는 다른 수의 모든 경로를 사용할 수 있습니다.
        경로의 다음 주소에 도달하기 위한 중간 게이트웨이입니다.

        조각화 시 복사되어야 합니다. 최대 한 번만 나타납니다.
        데이터그램.

      엄격한 출처 및 기록 경로

        +--------+--------+--------+--------//--------+
        |10001001| 길이 | 포인터| 경로 데이터 |
        +--------+--------+--------+--------//--------+
         유형=137

        엄격한 소스 및 레코드 경로(SSRR) 옵션은 다음을 제공합니다.
        인터넷 데이터그램의 소스가 라우팅을 제공하는 수단
        게이트웨이가 전달하는 데 사용할 정보
        목적지로 데이터그램을 보내고 경로를 기록합니다.
        정보.

        옵션은 옵션 유형 코드로 시작합니다. 두 번째 옥텟은
        옵션 유형 코드와 옵션 길이를 포함하는 옵션 길이입니다.
        길이 옥텟, 포인터 옥텟, 경로의 길이-3 옥텟
        데이터. 세 번째 옥텟은 경로 데이터를 가리키는 포인터입니다.
        다음 소스 주소의 시작 옥텟을 나타냅니다.
        처리되었습니다. 포인터는 이 옵션을 기준으로 하며
        포인터의 최소 합법적 값은 4입니다.

        경로 데이터는 일련의 인터넷 주소로 구성됩니다.
        각 인터넷 주소는 32비트 또는 4옥텟입니다. 포인터가
        길이보다 크면 소스 경로가 비어 있습니다(그리고



                                                               [19페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



        기록된 경로가 가득 찼으며 경로는 다음을 기반으로 합니다.
        목적지 주소 필드.

        목적지 주소 필드에 있는 주소에 도달한 경우
        포인터가 길이보다 크지 않으면 다음 주소는
        소스 경로는 대상 주소의 주소를 대체합니다.
        필드 및 기록된 경로 주소가 소스를 대체합니다.
        방금 사용한 주소이고, 포인터는 4만큼 증가합니다.

        기록된 경로 주소는 인터넷 모듈 자체의 인터넷 주소입니다.
        이 데이터그램이 있는 환경에서 알려진 주소
        전달 중입니다.

        소스 경로를 기록된 경로로 대체하는 이 절차
        경로(순서와는 반대이지만)
        소스 경로로 사용됨)은 옵션(및 IP 헤더)을 의미합니다.
        데이터그램이 진행됨에 따라 전체 길이가 일정하게 유지됩니다.
        인터넷을 통해서.

        이 옵션은 게이트웨이 또는 호스트가 엄격한 소스 경로이기 때문에
        IP는 데이터그램을 다음 주소로 직접 보내야 합니다.
        직접 연결된 네트워크만을 통한 소스 경로
        다음 게이트웨이 또는 호스트에 도달하기 위해 다음 주소에 표시됨
        경로에 지정됨.

        조각화 시 복사되어야 합니다. 최대 한 번만 나타납니다.
        데이터그램.

      기록 경로

        +--------+--------+--------+--------//--------+
        |00000111| 길이 | 포인터| 경로 데이터 |
        +--------+--------+--------+--------//--------+
          유형=7

        기록 경로 옵션은 경로를 기록하는 수단을 제공합니다.
        인터넷 데이터그램.

        옵션은 옵션 유형 코드로 시작합니다. 두 번째 옥텟은
        옵션 유형 코드와 옵션 길이를 포함하는 옵션 길이입니다.
        길이 옥텟, 포인터 옥텟, 경로의 길이-3 옥텟
        데이터. 세 번째 옥텟은 경로 데이터를 가리키는 포인터입니다.
        경로를 저장할 다음 영역의 시작 옥텟을 나타냅니다.
        주소. 포인터는 이 옵션을 기준으로 하며
        포인터의 최소 합법적 값은 4입니다.

        기록된 경로는 일련의 인터넷 주소로 구성됩니다.
        각 인터넷 주소는 32비트 또는 4옥텟입니다. 포인터가


[20페이지]

1981년 9월
인터넷 프로토콜
사양



        길이보다 크면 기록된 경로 데이터 영역이 가득 찼습니다.
        발신 호스트는 이 옵션을 큰 값으로 구성해야 합니다.
        예상되는 모든 주소를 보관할 수 있는 충분한 경로 데이터 영역입니다.
        주소 추가로 인해 옵션의 크기가 변경되지 않습니다.
        경로 데이터 영역의 초기 내용은 0이어야 합니다.

        인터넷 모듈이 데이터그램을 라우팅할 때 다음을 확인합니다.
        레코드 경로 옵션이 있습니다. 이 옵션이 있는 경우 해당 레코드 경로를 삽입합니다.
        이것이 속한 환경에서 알려진 자체 인터넷 주소
        데이터그램은 기록된 경로로 전달되고 있습니다.
        포인터가 가리키는 옥텟을 증가시키고 포인터를 증가시킵니다.
        4시까지.

        경로 데이터 영역이 이미 가득 찬 경우(포인터가 초과된 경우)
        길이) 데이터그램은 주소를 삽입하지 않고 전달됩니다.
        기록된 경로로. 공간이 있지만 충분하지 않은 경우
        전체 주소를 삽입할 공간이 있으면 원래 데이터그램은
        오류로 간주되어 삭제됩니다. 어느 경우든
        ICMP 매개변수 문제 메시지가 소스로 전송될 수 있습니다.
        호스트[ 3 ].

        조각화 시 복사되지 않으며, 첫 번째 조각에만 저장됩니다.
        데이터그램에 최대 한 번 나타납니다.

      스트림 식별자

        +--------+--------+--------+--------+
        |10001000|00000010| 스트림 ID |
        +--------+--------+--------+--------+
         유형=136 길이=4

        이 옵션은 16비트 SATNET 스트림을 위한 방법을 제공합니다.
        지원하지 않는 네트워크를 통해 전달되는 식별자
        스트림 개념.

        조각화 시 복사되어야 합니다. 최대 한 번만 나타납니다.
        데이터그램.













                                                               [21페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



      인터넷 타임스탬프

        +--------+--------+--------+--------+
        |01000100| 길이 | 포인터|oflw|flg|
        +--------+--------+--------+--------+
        | 인터넷 주소 |
        +--------+--------+--------+--------+
        | 타임스탬프 |
        +--------+--------+--------+--------+
        | . |
                          .
                          .
        유형 = 68

        옵션 길이는 옵션 카운팅의 옥텟 수입니다.
        유형, 길이, 포인터 및 오버플로/플래그 옥텟(최대
        길이 40).

        포인터는 이것의 시작부터 옥텟의 수입니다.
        타임스탬프 끝에 1을 더한 옵션(즉, 다음을 가리킴)
        다음 타임스탬프를 위한 공간을 시작하는 옥텟). 가장 작은
        합법적인 값은 5입니다. 포인터가
        길이보다 큽니다.

        오버플로(oflw) [4비트]는 IP 모듈의 수입니다.
        공간이 부족하여 타임스탬프를 등록할 수 없습니다.

        플래그(flg) [4비트] 값은 다음과 같습니다.

          0 -- 타임스탬프만, 연속된 32비트 단어로 저장됨

          1 -- 각 타임스탬프 앞에는 인터넷 주소가 표시됩니다.
               등록 기관,

          3 -- 인터넷 주소 필드는 미리 지정됩니다. IP
               모듈은 자체 타임스탬프와 일치하는 경우에만 타임스탬프를 등록합니다.
               주소를 다음에 지정된 인터넷 주소로 변경합니다.

        타임스탬프는 오른쪽 정렬된 32비트 타임스탬프입니다.
        UT 기준 자정 이후 밀리초. 시간을 사용할 수 없는 경우
        밀리초 또는 자정 UT와 관련하여 제공될 수 없습니다.
        그러면 높은 시간이 제공되면 언제든지 타임스탬프로 삽입될 수 있습니다.
        타임스탬프 필드의 순서 비트는 1로 설정되어 다음을 나타냅니다.
        비표준 값의 사용.

        발신 호스트는 이 옵션을 큰 값으로 구성해야 합니다.
        모든 타임스탬프 정보를 보관할 수 있는 충분한 타임스탬프 데이터 영역
        예상됩니다. 옵션 크기는 추가로 인해 변경되지 않습니다.


[22페이지]

1981년 9월
인터넷 프로토콜
사양



        타임스탬프. 타임스탬프 데이터 영역의 초기 내용
        0이거나 인터넷 주소/0 쌍이어야 합니다.

        타임스탬프 데이터 영역이 이미 가득 찬 경우(포인터가 초과한 경우)
        길이) 데이터그램은 삽입하지 않고 전달됩니다.
        타임스탬프는 하나 증가하지만 오버플로 카운트는 1씩 증가합니다.

        공간이 약간 있지만 전체 타임스탬프를 위한 공간이 충분하지 않은 경우
        삽입되어야 하거나 오버플로 카운트 자체가 오버플로되는 경우
        원래 데이터그램에 오류가 있는 것으로 간주되어 삭제됩니다.
        어느 경우든 ICMP 매개변수 문제 메시지가 전송될 수 있습니다.
        소스 호스트[ 3 ].

        타임스탬프 옵션은 조각화 시 복사되지 않습니다.
        첫 번째 조각에 포함되어 있습니다. 최대 한 번만 나타납니다.
        데이터그램.

패딩: 가변

    인터넷 헤더 패딩은 인터넷이
    헤더는 32비트 경계에서 끝납니다. 패딩은 0입니다.

3.2 . 토론

프로토콜 구현은 견고해야 합니다. 각 구현은
다른 사람이 만든 다른 것들과 상호 운용될 것으로 예상해야 합니다.
개인. 이 사양의 목적은 명시적인 것입니다.
프로토콜에 관해서는 다를 가능성이 있습니다
해석. 일반적으로 구현은 보수적이어야 합니다.
보내는 행동에서는 자유롭고, 받는 행동에서는 관대합니다.
즉, 잘 구성된 데이터그램을 보내는 데 주의해야 하지만 수락해야 합니다.
해석할 수 있는 모든 데이터그램(예: 기술적인 것에 반대하지 않음)
(의미가 여전히 명확한 오류).

기본 인터넷 서비스는 데이터그램 중심이며 다음을 제공합니다.
게이트웨이에서 데이터그램의 단편화, 재조립이 발생함
대상 호스트의 대상 인터넷 프로토콜 모듈에서.
물론, 네트워크 내에서 데이터그램의 단편화 및 재조립
또는 네트워크 게이트웨이 간의 개인 계약에 의해서도 가능합니다.
이는 인터넷 프로토콜과 관련하여 투명하므로 허용됩니다.
상위 수준 프로토콜. 이러한 투명한 유형의 단편화 및
재조립은 "네트워크 종속"(또는 인트라넷) 단편화라고 합니다.
여기서는 더 이상 논의하지 않습니다.

인터넷 주소는 호스트에 대한 소스와 목적지를 구분합니다.
수준과 프로토콜 필드도 제공합니다. 각각은
프로토콜은 필요한 모든 다중화를 제공합니다.
주인.


                                                               [23페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



주소 지정

    네트워크에 주소를 할당하는 데 있어 유연성을 제공하려면
    다양한 규모의 중소 규모 네트워크를 허용합니다.
    주소 필드의 해석은 작은 것을 지정하도록 코딩됩니다.
    호스트 수가 많고 네트워크 수가 적당함
    적당한 수의 호스트와 많은 수의
    소수의 호스트가 있는 네트워크. 또한
    확장 주소 지정 모드를 위한 이스케이프 코드.

    주소 형식:

      상위 비트 형식 클래스
      --------------- ------------------------------- -----
            0 7비트의 넷, 24비트의 호스트 a
            10 14비트의 넷, 16비트의 호스트 b
            110 21비트의 넷, 8비트의 호스트 c
            111 확장 주소 지정 모드로 이스케이프

      네트워크 필드의 값이 0이면 이 네트워크를 의미합니다.
      특정 ICMP 메시지에만 사용됩니다. 확장 주소 지정 모드
      정의되지 않았습니다. 두 기능 모두 향후 사용을 위해 예약되어 있습니다.

    네트워크 주소에 할당된 실제 값은 다음과 같습니다.
    "할당된 번호"[ 9 ].

    로컬 네트워크에서 할당된 로컬 주소는 다음을 허용해야 합니다.
    단일 물리적 호스트가 여러 개의 개별 인터넷 호스트처럼 동작합니다.
    즉, 인터넷 호스트 주소와 사이에 매핑이 있어야 합니다.
    여러 인터넷 주소를 허용하는 네트워크/호스트 인터페이스
    하나의 인터페이스에 해당합니다. 호스트도 허용해야 합니다.
    여러 개의 물리적 인터페이스를 가지고 있으며 데이터그램을 처리합니다.
    마치 그것들이 모두 하나의 호스트에게 전달된 것처럼 여러 개가 있었습니다.

    인터넷 주소와 주소 간의 주소 매핑
    ARPANET, SATNET, PRNET 및 기타 네트워크는 "주소"에 설명되어 있습니다.
    매핑"[ 5 ].

단편화와 재조립.

    인터넷 식별 필드(ID)는 다음과 함께 사용됩니다.
    소스 및 대상 주소와 프로토콜 필드를 식별합니다.
    재조립을 위한 데이터그램 조각.

    데이터그램이 아닌 경우 더 많은 조각 플래그 비트(MF)가 설정됩니다.
    마지막 조각입니다. 조각 오프셋 필드는 조각을 식별합니다.
    위치, 원래 조각화되지 않은 시작 부분을 기준으로 함
    데이터그램. 조각은 8옥텟 단위로 계산됩니다.


[24페이지]

1981년 9월
인터넷 프로토콜
사양



    단편화 전략은 단편화되지 않은 데이터그램보다 더 효율적으로 설계되었습니다.
    모든 0 조각화 정보(MF = 0, 조각 오프셋 =
    0). 인터넷 데이터그램이 조각난 경우 해당 데이터 부분은 다음과 같아야 합니다.
    8옥텟 경계에서 끊어짐.

    이 형식은 각각 8옥텟의 2**13 = 8192개 조각을 허용합니다.
    총 65,536 옥텟입니다. 이는 다음과 일치합니다.
    데이터그램 총 길이 필드(물론 헤더는 계산됨)
    (전체 길이는 아니고 조각의 길이입니다).

    조각화가 발생하면 일부 옵션은 복사되지만 다른 옵션은 복사됩니다.
    첫 번째 조각만 남습니다.

    모든 인터넷 모듈은 68개의 데이터그램을 전달할 수 있어야 합니다.
    더 이상의 단편화 없이 옥텟을 생성합니다. 이는 인터넷이
    헤더는 최대 60옥텟까지 가능하며, 최소 조각은 8옥텟입니다.

    모든 인터넷 목적지는 576 데이터그램을 수신할 수 있어야 합니다.
    옥텟은 한 조각으로 되어 있거나, 다시 조립할 수 있는 조각으로 되어 있습니다.

    단편화의 영향을 받을 수 있는 분야는 다음과 같습니다.

      (1) 옵션 필드
      (2) 더 많은 조각 플래그
      (3) 조각 오프셋
      (4) 인터넷 헤더 길이 필드
      (5) 총 길이 필드
      (6) 헤더 체크섬

    Don't Fragment 플래그(DF) 비트가 설정된 경우 인터넷
    이 데이터그램의 조각화는 허용되지 않지만 다음과 같은 경우에는 허용됩니다.
    폐기되었습니다. 이는 다음과 같은 경우 조각화를 금지하는 데 사용할 수 있습니다.
    수신 호스트에 충분한 리소스가 없는 경우
    인터넷 조각을 다시 조립합니다.

    Don't Fragment 기능 사용의 한 가지 예는 다운라인입니다.
    작은 호스트를 로드합니다. 작은 호스트에는 부트 스트랩 프로그램이 있을 수 있습니다.
    데이터그램을 받아서 메모리에 저장한 다음 실행합니다.

    단편화 및 재조립 절차는 가장 쉽습니다.
    예를 들어 설명합니다. 다음 절차는 예시입니다.
    구현.

    다음 의사 프로그램의 일반 표기법: "=<"는 "덜"을 의미합니다.
    "같거나 같음", "#"은 "같지 않음"을 의미하고, "="는 "같음"을 의미하고, "<-"는
    "로 설정됨". 또한 "x에서 y까지"는 x를 포함하고 y는 제외합니다. 예를 들어,
    "4~7"에는 4, 5, 6이 포함됩니다(7은 제외).



                                                               [25페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



    조각화 절차의 예

      전송할 수 있는 최대 크기의 데이터그램
      다음 네트워크는 최대 전송 단위(MTU)라고 합니다.

      총 길이가 최대 전송 길이보다 작거나 같은 경우
      그런 다음 이 데이터그램을 데이터그램의 다음 단계로 제출합니다.
      처리; 그렇지 않으면 데이터그램을 두 개의 조각으로 자릅니다.
      첫 번째 조각은 최대 크기이고 두 번째 조각은
      나머지 데이터그램입니다. 첫 번째 조각이 제출됩니다.
      데이터그램 처리의 다음 단계로, 두 번째 조각은
      여전히 너무 큰 경우 이 절차에 제출됩니다.

      표기법:

        FO - 조각 오프셋
        IHL - 인터넷 헤더 길이
        DF - 조각화 금지 플래그
        MF - 더 많은 조각 플래그
        TL - 총 길이
        OFO - 이전 조각 오프셋
        OIHL - 이전 인터넷 헤더 길이
        OMF - Old More Fragments 플래그
        OTL - 이전 총 길이
        NFB - 조각 블록 수
        MTU - 최대 전송 단위

      절차:

        IF TL =< MTU THEN 이 데이터그램을 다음 단계로 제출합니다.
             데이터그램 처리에서 ELSE IF DF = 1이면 삭제합니다.
        데이터그램 ELSE
        첫 번째 조각을 생성하려면:
        (1) 원본 인터넷 헤더를 복사합니다.
        (2) OIHL <- IHL; OTL <-TL; OFO <-FO; OMF <-MF;
        (3) NFB <- (MTU-IHL*4)/8;
        (4) 첫 번째 NFB*8 데이터 옥텟을 첨부합니다.
        (5) 헤더를 수정하세요:
             MF <- 1; TL <- (IHL*4)+(NFB*8);
             체크섬 재계산;
        (6) 이 조각을 다음 단계로 제출합니다.
             데이터그램 처리;
        두 번째 조각을 생성하려면:
        (7) 인터넷 헤더를 선택적으로 복사합니다(일부 옵션)
             복사되지 않습니다. 옵션 정의를 참조하세요.
        (8) 나머지 데이터를 추가합니다.
        (9) 헤더를 수정하세요:
             IHL <- (((OIHL*4)-(복사되지 않은 옵션의 길이))+3)/4;


[26페이지]

1981년 9월
인터넷 프로토콜
사양



             TL <- OTL - NFB*8 - (OIHL-IHL)*4);
             FO <-OFO + NFB; MF<-OMF; 체크섬을 다시 계산합니다.
        (10) 이 조각을 조각화 테스트에 제출합니다. 완료.

      위의 절차에서 각 조각(마지막 조각 제외)이 만들어졌습니다.
      허용되는 최대 크기입니다. 대안은 더 적은 양을 생성할 수 있습니다.
      최대 크기 데이터그램보다 큽니다. 예를 들어, 다음을 구현할 수 있습니다.
      대용량 데이터그램을 반복적으로 분할하는 단편화 절차
      결과 조각이 최대값보다 작아질 때까지 절반
      전송 장치 크기.

    재조립 절차의 예

      각 데이터그램에 대해 버퍼 식별자는 다음과 같이 계산됩니다.
      소스, 대상, 프로토콜의 연결
      식별 필드. 이것이 전체 데이터그램(둘 다)인 경우
      조각 오프셋과 더 많은 조각 필드가 0인 경우)
      이 버퍼 식별자와 연관된 모든 재조립 리소스
      해제되고 데이터그램은 다음 단계로 전달됩니다.
      데이터그램 처리.

      이 버퍼 식별자가 있는 다른 조각이 없으면
      재조립 리소스가 할당됩니다. 재조립 리소스
      데이터 버퍼, 헤더 버퍼, 프래그먼트 블록 비트로 구성됨
      테이블, 총 데이터 길이 필드 및 타이머.
      프래그먼트는 프래그먼트에 따라 데이터 버퍼에 배치됩니다.
      오프셋과 길이, 그리고 비트는 조각 블록 비트에 설정됩니다.
      수신된 조각 블록에 해당하는 테이블입니다.

      이것이 첫 번째 조각인 경우(즉, 조각 오프셋은
      0) 이 헤더는 헤더 버퍼에 배치됩니다. 이것이
      마지막 조각(즉, 더 많은 조각 필드가 0인 경우)
      총 데이터 길이가 계산됩니다. 이 조각이 완료되면
      데이터그램(조각 블록에 설정된 비트를 확인하여 테스트됨)
      테이블), 그런 다음 데이터그램은 데이터그램의 다음 단계로 전송됩니다.
      처리 중; 그렇지 않으면 타이머가 최대값으로 설정됩니다.
      현재 타이머 값과 TTL(Time To Live) 필드의 값
      이 조각; 그리고 재조립 루틴은 제어를 포기합니다.

      타이머가 만료되면 이에 대한 모든 재조립 리소스가
      버퍼 식별자가 해제됩니다. 타이머의 초기 설정
      재조립 대기 시간의 하한값입니다. 그 이유는 다음과 같습니다.
      Time to Live가 있는 경우 대기 시간이 늘어납니다.
      도착하는 조각은 현재 타이머 값보다 크지만
      이보다 작으면 감소되지 않습니다. 이 타이머의 최대값은
      도달할 수 있는 최대 수명은 (약 4.25)입니다.
      분). 초기 타이머에 대한 현재 권장 사항
      설정은 15초입니다. 이는 경험에 따라 변경될 수 있습니다.


                                                               [27페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



      이 프로토콜은 누적됩니다. 이 매개변수의 선택에 유의하세요.
      값은 사용 가능한 버퍼 용량과 데이터와 관련이 있습니다.
      전송 매체의 속도, 즉 데이터 속도에 타이머를 곱한 값
      값은 버퍼 크기와 같습니다(예: 10Kb/s X 15초 = 150Kb).

      표기법:

        FO - 조각 오프셋
        IHL - 인터넷 헤더 길이
        MF - 더 많은 조각 플래그
        TTL - 수명
        NFB - 조각 블록 수
        TL - 총 길이
        TDL - 총 데이터 길이
        BUFID - 버퍼 식별자
        RCVBT - 수신된 조각 비트 테이블
        TLB - 타이머 하한

      절차:

        (1) BUFID <- 소스|대상|프로토콜|식별;
        (2) FO = 0이고 MF = 0인 경우
        (3) BUFID가 있는 버퍼가 할당되면
        (4) 그런 다음 이 BUFID에 대한 모든 재조립을 플러시합니다.
        (5) 다음 단계로 데이터그램을 제출합니다. 완료.
        (6) ELSE IF BUFID가 있는 버퍼가 할당되지 않은 경우
        (7) 그런 다음 재조립 리소스를 할당합니다.
                             BUFID를 사용하여;
                             타이머 <- TLB; TDL <- 0;
        (8) 데이터 버퍼에 조각의 데이터를 넣습니다.
                     옥텟 FO*8에서 BUFID까지
                                         옥텟 (TL-(IHL*4))+FO*8;
        (9) FO에서 RCVBT 비트를 설정합니다.
                                        FO+((TL-(IHL*4)+7)/8);로
        (10) MF = 0이면 TDL <- TL-(IHL*4)+(FO*8)
        (11) FO = 0이면 헤더 버퍼에 헤더를 넣습니다.
        (12) TDL # 0인 경우
        (13) 그리고 0부터 모든 RCVBT 비트
                                             (TDL+7)/8로 설정됩니다
        (14) 그러면 TL <- TDL+(IHL*4)
        (15) 다음 단계로 데이터그램을 제출합니다.
        (16) 모든 재조립 리소스 해제
                             이 BUFID에 대해; 완료.
        (17) 타이머 <- MAX(타이머,TTL);
        (18) 다음 조각이나 타이머가 만료될 때까지 포기합니다.
        (19) 타이머가 만료됨: 이 BUFID로 모든 재조립을 플러시합니다. 완료.

      두 개 이상의 조각에 동일한 데이터가 포함되어 있는 경우


[28페이지]

1981년 9월
인터넷 프로토콜
사양



      동일하거나 부분적으로 중복되는 경우 이 절차는
      데이터 버퍼에 가장 최근에 도착한 복사본을 사용합니다.
      데이터그램이 전달되었습니다.

신분증

    데이터그램의 식별자 선택은 다음 필요성에 따라 결정됩니다.
    특정 조각을 고유하게 식별하는 방법을 제공합니다.
    데이터그램. 프로토콜 모듈은 조각을 조립하여 조각을 판단합니다.
    동일한 소스를 가지고 있는 경우 동일한 데이터그램에 속합니다.
    목적지, 프로토콜 및 식별자. 따라서 발신자는 다음을 선택해야 합니다.
    이 소스, 대상 쌍에 대해 식별자가 고유해야 합니다.
    데이터그램(또는 그 일부)이 전송될 수 있는 시간에 대한 프로토콜
    인터넷에서 살아있음.

    그러면 전송 프로토콜 모듈은 테이블을 유지해야 하는 것 같습니다.
    식별자의 경우, 전달된 각 목적지에 대한 하나의 항목
    인터넷의 마지막 최대 패킷 수명 내에 있습니다.

    그러나 식별자 필드는 65,536개의 서로 다른 값을 허용하므로
    일부 호스트는 단순히 고유 식별자를 독립적으로 사용할 수 있습니다.
    목적지의.

    일부 상위 수준 프로토콜에서는 다음을 선택하는 것이 적절합니다.
    식별자. 예를 들어, TCP 프로토콜 모듈은 다음을 다시 전송할 수 있습니다.
    동일한 TCP 세그먼트 및 올바른 수신 확률
    재전송이 동일한 식별자를 전달하면 향상될 것입니다.
    데이터그램의 조각이 원래 전송된 이후부터
    올바른 TCP 세그먼트를 구성하는 데 사용될 수 있습니다.

서비스 유형

    서비스 유형(TOS)은 인터넷 서비스 품질을 선택하기 위한 것입니다.
    서비스 유형은 추상 매개변수를 따라 지정됩니다.
    우선순위, 지연, 처리량 및 신뢰성. 이러한 추상
    매개변수는 실제 서비스 매개변수에 매핑되어야 합니다.
    데이터그램이 통과하는 특정 네트워크.

    우선순위. 이것의 중요성을 독립적으로 측정하는 것
    데이터그램.

    지연. 이 데이터그램의 경우 신속한 전달이 중요합니다.
    표시.

    처리량. 이 데이터그램의 경우 높은 데이터 전송률이 중요합니다.
    표시.




                                                               [29페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



    신뢰성. 배달을 보장하기 위한 더 높은 수준의 노력
    이 표시가 있는 데이터그램에 중요합니다.

    예를 들어, ARPANET에는 우선 순위 비트가 있으며 다음 중에서 선택할 수 있습니다.
    "표준" 메시지(유형 0) 및 "제어되지 않은" 메시지(유형 3)
    (단일 패킷과 다중 패킷 메시지 중 선택 가능
    서비스 매개변수로 간주될 수 있음). 제어되지 않는 메시지는 경향이 있습니다.
    덜 안정적으로 전달되고 지연이 덜 발생합니다. 가정해 보겠습니다.
    인터넷 데이터그램은 ARPANET을 통해 전송됩니다.
    인터넷 서비스 유형은 다음과 같습니다.

      우선순위: 5
      지연: 0
      처리량: 1
      신뢰성: 1

    이 예에서 이러한 매개변수를 사용 가능한 매개변수에 매핑합니다.
    ARPANET의 경우 ARPANET 우선 순위 비트를 설정하는 것이 좋습니다.
    인터넷 우선순위는 범위의 상위 절반에 있으므로 선택하려면
    처리량 및 안정성 요구 사항 이후 표준 메시지
    표시되며 지연은 없습니다. 자세한 내용은 서비스에 나와 있습니다."서비스 매핑"[ 8 ] 
    의 매핑 .

살아갈 시간

    TTL(Time To Live)은 보낸 사람이 최대 시간으로 설정합니다.
    데이터그램은 인터넷 시스템에 있을 수 있습니다. 데이터그램이
    인터넷 시스템에 있는 시간이 수명보다 길면
    데이터그램을 파기해야 합니다.

    이 필드는 인터넷 헤더의 각 지점에서 감소해야 합니다.
    데이터그램을 처리하는 데 소요된 시간을 반영하여 처리됩니다.
    실제로는 당시의 현지 정보가 없더라도
    소비된 경우 필드는 1만큼 감소해야 합니다. 시간은 다음과 같이 측정됩니다.
    초 단위(즉, 값 1은 1초를 의미함). 따라서
    최대 수명은 255초 또는 4.25분입니다.
    데이터그램을 처리하는 모듈은 TTL을 최소한으로 줄여야 합니다.
    1초 이내에 데이터그램을 처리하더라도 TTL은
    데이터그램이 생성될 수 있는 시간의 상한으로만 생각해야 합니다.
    존재합니다. 전달 불가능한 데이터그램을 발생시키는 것이 의도입니다.
    삭제하고, 최대 데이터그램 수명을 제한합니다.

    일부 상위 레벨의 안정적인 연결 프로토콜은 다음을 기반으로 합니다.
    오래된 중복 데이터그램이 다음 이후에 도착하지 않을 것이라는 가정
    특정 시간이 경과합니다. TTL은 이러한 프로토콜이
    그들의 가정이 충족된다는 확신.




[30페이지]

1981년 9월
인터넷 프로토콜
사양



옵션

    각 데이터그램에서는 옵션이 선택 사항이지만 필수입니다.
    구현. 즉, 옵션의 존재 여부는 다음과 같습니다.
    발신자의 선택이지만 각 인터넷 모듈은 다음을 수행할 수 있어야 합니다.
    모든 옵션을 구문 분석합니다. 여러 옵션이 존재할 수 있습니다.
    옵션 필드.

    옵션은 32비트 경계에서 끝나지 않을 수 있습니다. 인터넷 헤더
    0으로 구성된 옥텟으로 채워야 합니다. 이 중 첫 번째는
    옵션의 끝 옵션으로 해석되고 나머지는 다음과 같습니다.
    인터넷 헤더 패딩.

    모든 인터넷 모듈은 모든 옵션에 대해 작동할 수 있어야 합니다.
    분류, 제한 또는 보안 옵션이 필요한 경우
    구획된 교통은 통과되어야 합니다.

체크섬

    인터넷 헤더가 있는 경우 인터넷 헤더 체크섬이 다시 계산됩니다.
    변경되었습니다. 예를 들어, 수명 단축, 추가 또는
    인터넷 옵션 변경이나 조각화로 인해 발생합니다. 이 체크섬은
    인터넷 수준에서는 인터넷 헤더를 보호하기 위한 것입니다.
    전송 오류로 인한 필드.

    일부 응용 프로그램에서는 몇 개의 데이터 비트 오류가 발생합니다.
    재전송 지연은 허용되지 않지만 인터넷이
    프로토콜이 강제하는 데이터 정확성이 이러한 응용 프로그램을 사용할 수 없습니다.
    지원됨.

오류

    인터넷 프로토콜 오류는 ICMP 메시지를 통해 보고될 수 있습니다[ 3 ].

3.3 . 인터페이스

IP에 대한 사용자 인터페이스의 기능 설명은 최상의 경우 다음과 같습니다.
가상적이기 때문에 모든 운영 체제는 서로 다릅니다.
따라서 우리는 독자들에게 다른 IP
구현마다 사용자 인터페이스가 다를 수 있습니다. 그러나 모든 IP는
모든 사람이 만족할 수 있도록 최소한의 특정 서비스 세트를 제공해야 합니다.
IP 구현은 동일한 프로토콜 계층을 지원할 수 있습니다.
섹션은 모든 IP에 필요한 기능적 인터페이스를 지정합니다.
구현.

로컬 네트워크의 한쪽에는 인터넷 프로토콜 인터페이스가 있고
상위 수준 프로토콜이나 애플리케이션의 다른 측면
프로그램. 다음에서는 상위 레벨 프로토콜 또는 애플리케이션


                                                               [31페이지]

                                                          1981년 9월
인터넷 프로토콜
사양



프로그램(또는 게이트웨이 프로그램)은 "사용자"라고 불립니다.
인터넷 모듈을 사용하고 있습니다. 인터넷 프로토콜은 데이터그램이기 때문에
프로토콜에서는 데이터그램 사이에 유지되는 메모리나 상태가 최소화됩니다.
전송 및 인터넷 프로토콜 모듈에 대한 각 호출
사용자는 IP가 작업을 수행하는 데 필요한 모든 정보를 제공합니다.
서비스를 요청했습니다.

상위 레벨 인터페이스의 예

다음 두 가지 예제 호출은 사용자 요구 사항을 충족합니다.
인터넷 프로토콜 모듈 통신("=>"는 반환을 의미):

SEND(src, dst, prot, TOS, TTL, BufPTR, len, Id, DF, opt => 결과)

    어디:

      src = 소스 주소
      dst = 목적지 주소
      prot = 프로토콜
      TOS = 서비스 유형
      TTL = 수명
      BufPTR = 버퍼 포인터
      len = 버퍼의 길이
      ID = 식별자
      DF = 조각내지 마세요
      opt = 옵션 데이터
      결과 = 응답
        OK = 데이터그램이 정상적으로 전송됨
        오류 = 인수 오류 또는 로컬 네트워크 오류

    우선순위는 TOS에 포함되어 있으며
    보안/구획은 옵션으로 제공됩니다.

RECV(BufPTR, 보호, => 결과, 소스, 대상, TOS, 길이, 옵션)

    어디:

      BufPTR = 버퍼 포인터
      prot = 프로토콜
      결과 = 응답
        OK = 데이터그램이 정상적으로 수신됨
        오류 = 인수 오류
      len = 버퍼의 길이
      src = 소스 주소
      dst = 목적지 주소
      TOS = 서비스 유형
      opt = 옵션 데이터



[32페이지]

1981년 9월
인터넷 프로토콜
사양



사용자가 데이터그램을 보내면 SEND 호출을 실행하여 다음을 제공합니다.
모든 인수. 인터넷 프로토콜 모듈은 이것을 수신할 때
호출하고 인수를 확인하고 메시지를 준비하여 보냅니다.
인수가 좋고 데이터그램이 로컬 네트워크에서 수락됩니다.
호출이 성공적으로 반환됩니다. 인수가 잘못되었거나
데이터그램이 로컬 네트워크에서 수락되지 않으면 호출이 반환됩니다.
실패한 경우. 실패한 신고의 경우 합리적인 보고서를 작성해야 합니다.
문제의 원인에 대해서는 언급하지 않았지만 그러한 보고서의 세부 사항은 다음과 같습니다.
개별 구현에 달려 있습니다.

로컬에서 인터넷 프로토콜 모듈에 데이터그램이 도착하면
네트워크에서 사용자가 지정한 보류 중인 RECV 호출이 있거나
또는 없습니다. 첫 번째 경우 보류 중인 호출은 다음에 의해 충족됩니다.
데이터그램에서 사용자에게 정보를 전달합니다. 두 번째
이 경우, 해당 사용자에게 보류 중인 데이터그램이 통지됩니다.
사용자 주소가 존재하지 않으면 ICMP 오류 메시지가 반환됩니다.
보낸 사람, 데이터는 삭제됩니다.

사용자 알림은 가상 인터럽트 또는 유사한 방식을 통해 이루어질 수 있습니다.
특정 운영 체제에 적합한 메커니즘
구현 환경.

사용자의 RECV 호출은 즉시 다음 중 하나로 충족될 수 있습니다.
보류 중인 데이터그램이 있거나 데이터그램이 도착할 때까지 호출이 보류 중일 수 있습니다.

전송 호출에 소스 주소가 포함됩니다.
호스트에는 여러 개의 주소(여러 개의 물리적 연결 또는 논리적 연결)가 있습니다.
주소). 인터넷 모듈은 소스가 무엇인지 확인해야 합니다.
주소는 이 호스트의 합법적인 주소 중 하나입니다.

구현에서는 인터넷 호출을 허용하거나 요구할 수도 있습니다.
클래스에 대한 관심을 나타내거나 해당 클래스의 독점적 사용을 예약하는 모듈
데이터그램(예: 프로토콜에 특정 값이 있는 모든 데이터그램)
필드).

이 섹션에서는 USER/IP 인터페이스의 기능적 특성을 설명합니다.
사용된 표기법은 대부분의 함수 호출 절차와 유사합니다.
수준 언어이지만 이 사용법은 트랩 유형을 배제하는 것을 의미하지 않습니다.
서비스 호출(예: SVC, UUO, EMT) 또는 기타 형태의
프로세스 간 통신.










                                                               [33페이지]

                                                          1981년 9월
인터넷 프로토콜



부록 A: 예제 및 시나리오

예 1:

이는 최소 데이터를 전송하는 인터넷 데이터그램의 예입니다.


    0 1 2 3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|버전= 4 |IHL= 5 |서비스 유형| 총 길이 = 21 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 식별 = 111 |Flg=0| 조각 오프셋 = 0 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 시간 = 123 | 프로토콜 = 1 | 헤더 체크섬 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 소스 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 목적지 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
+-+-+-+-+-+-+-+-+

                       인터넷 데이터그램의 예

                               그림 5.

각 눈금 표시는 하나의 비트 위치를 나타냅니다.

이는 인터넷 프로토콜 버전 4의 인터넷 데이터그램입니다.
인터넷 헤더는 5개의 32비트 단어로 구성되며 총 길이는
데이터그램은 21옥텟입니다. 이 데이터그램은 완전한 데이터그램입니다(
(조각)


















[34페이지]

1981년 9월
인터넷 프로토콜



예 2:

이 예에서 우리는 먼저 중간 크기의 인터넷 데이터그램(452)을 보여줍니다.
데이터 옥텟) 그러면 두 개의 인터넷 조각이 발생할 수 있습니다.
최대 크기 전송이 있는 경우 이 데이터그램의 조각화
허용된 옥텟은 280개입니다.


    0 1 2 3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|버전= 4 |IHL= 5 |서비스 유형| 총 길이 = 472 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 식별 = 111 |Flg=0| 조각 오프셋 = 0 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 시간 = 123 | 프로토콜 = 6 | 헤더 체크섬 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 소스 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 목적지 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
\ \
\ \
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                       인터넷 데이터그램의 예

                               그림 6.

















                                                               [35페이지]

                                                          1981년 9월
인터넷 프로토콜



이제 데이터그램을 분할한 후 발생하는 첫 번째 조각은
256개의 데이터 옥텟.


    0 1 2 3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|버전= 4 |IHL= 5 |서비스 유형| 총 길이 = 276 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 식별 = 111 |Flg=1| 조각 오프셋 = 0 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 시간 = 119 | 프로토콜 = 6 | 헤더 체크섬 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 소스 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 목적지 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
\ \
\ \
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                       인터넷 조각 예시

                               그림 7.





















[36페이지]

1981년 9월
인터넷 프로토콜



그리고 두 번째 조각.


    0 1 2 3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|버전= 4 |IHL= 5 |서비스 유형| 총 길이 = 216 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 식별 = 111 |Flg=0| 조각 오프셋 = 32 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 시간 = 119 | 프로토콜 = 6 | 헤더 체크섬 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 소스 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 목적지 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
\ \
\ \
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                       인터넷 조각 예시

                               그림 8.






















                                                               [37페이지]

                                                          1981년 9월
인터넷 프로토콜



예 3:

여기서는 옵션이 포함된 데이터그램의 예를 보여드리겠습니다.


    0 1 2 3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|버전= 4 |IHL= 8 |서비스 유형| 총 길이 = 576 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 식별 = 111 |Flg=0| 조각 오프셋 = 0 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 시간 = 123 | 프로토콜 = 6 | 헤더 체크섬 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 소스 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 목적지 주소 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 옵션 코드 = x | 옵션 길이 = 3 | 옵션 값 | 옵션 코드 = x |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 옵션 길이 = 4 | 옵션 값 | 옵션 코드 = 1 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Opt. Code = y | Opt. Len. = 3 | 옵션 값 | Opt. Code = 0 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
\ \
\ \
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 데이터 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                       인터넷 데이터그램의 예

                               그림 9.
















[38페이지]

1981년 9월
인터넷 프로토콜



부록 B: 데이터 전송 순서

본 명세서에 기술된 헤더 및 데이터의 전송 순서는 다음과 같다.
문서는 옥텟 수준으로 확인됩니다. 다이어그램에 다음이 표시될 때마다
옥텟 그룹, 해당 옥텟의 전송 순서는 정상입니다.
영어에서 읽는 순서입니다. 예를 들어, 다음에서
다이어그램에서 옥텟은 번호가 매겨진 순서대로 전송됩니다.


    0 1 2 3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 1 | 2 | 3 | 4 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 5 | 6 | 7 | 8 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 9 | 10 | 11 | 12 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      바이트 전송 순서

                               그림 10.

옥텟이 숫자 양을 나타낼 때마다 가장 왼쪽 비트는
다이어그램은 최상위 비트 또는 최상위 비트입니다. 즉, 비트
0으로 표시된 것이 최상위 비트입니다. 예를 들어, 다음과 같습니다.
그림은 170(10진수) 값을 나타냅니다.


                            0 1 2 3 4 5 6 7
                           +-+-+-+-+-+-+-+-+
                           |1 0 1 0 1 0 1 0|
                           +-+-+-+-+-+-+-+-+

                          비트의 중요성

                               그림 11.

마찬가지로, 다중 옥텟 필드가 숫자 수량을 나타낼 때마다
전체 필드의 가장 왼쪽 비트가 가장 중요한 비트입니다.
다중 옥텟 수량이 전송되면 가장 중요한 옥텟은
먼저 전송됨.









                                                               [39페이지]

                                                          1981년 9월
인터넷 프로토콜






















































[40페이지]

1981년 9월
인터넷 프로토콜



                                어휘



1822
BBN 보고서 1822, "상호 연결 사양
호스트와 IMP". 인터페이스 사양
호스트와 ARPANET.

ARPANET 리더
호스트-IMP의 ARPANET 메시지에 대한 제어 정보
인터페이스.

ARPANET 메시지
호스트와 IMP 사이의 전송 단위
ARPANET. 최대 크기는 약 1012옥텟(8096비트)입니다.

ARPANET 패킷
ARPANET 내부에서 사용되는 전송 단위
IMP. 최대 크기는 약 126옥텟(1008비트)입니다.

목적지
목적지 주소, 인터넷 헤더 필드.

디에프
플래그 필드에 Don't Fragment 비트가 포함되어 있습니다.

깃발
다양한 제어 플래그를 담고 있는 인터넷 헤더 필드입니다.

조각 오프셋
이 인터넷 헤더 필드는 인터넷의 어느 위치를 나타냅니다.
데이터그램은 조각에 속합니다.

GGP
게이트웨이 간 프로토콜, 주로 사용되는 프로토콜
라우팅을 제어하는 ​​게이트웨이와 다른 게이트웨이 사이
기능.

헤더
메시지, 세그먼트의 시작 부분에 있는 제어 정보
데이터그램, 패킷 또는 데이터 블록.

ICMP
인터넷에 구현된 인터넷 제어 메시지 프로토콜
모듈에서 ICMP는 게이트웨이에서 호스트로, 그리고
호스트가 오류를 보고하고 라우팅 제안을 합니다.




                                                               [41페이지]

                                                          1981년 9월
인터넷 프로토콜
어휘



신분증
식별 값을 전달하는 인터넷 헤더 필드
보낸 사람이 조각 조립을 돕기 위해 할당함
데이터그램.

국제인도법
인터넷 헤더 필드 인터넷 헤더 길이는 길이입니다.
32비트 단어로 측정된 인터넷 헤더입니다.

꼬마 도깨비
인터페이스 메시지 프로세서, 패킷 스위치
아파넷.

인터넷 주소
4옥텟(32비트) 소스 또는 대상 주소로 구성됨
네트워크 필드와 로컬 주소 필드.

인터넷 데이터그램
인터넷 모듈 쌍 사이에서 교환되는 데이터 단위
(인터넷 헤더 포함).

인터넷 조각
인터넷 데이터그램의 데이터 중 일부는 인터넷
헤더.

로컬 주소
네트워크 내 호스트의 주소입니다. 실제 매핑은
호스트 주소에 인터넷 로컬 주소를 추가
네트워크는 매우 일반적이어서 다대일 매핑이 가능합니다.

엠에프
인터넷 헤더 플래그에 포함된 More-Fragments 플래그
필드.

기준 치수
일반적으로 소프트웨어에서 프로토콜이나 기타 구현
절차.

더 많은 조각 플래그
이 인터넷 데이터그램이 유효한지 여부를 나타내는 플래그
인터넷 데이터그램의 끝을 포함합니다.
인터넷 헤더 플래그 필드.

NFB
데이터 부분의 조각 블록 수
인터넷 조각. 즉, 데이터 일부의 길이
8옥텟 단위로 측정됨.



[42페이지]

1981년 9월
인터넷 프로토콜
어휘



팔중주
8비트 바이트.

옵션
인터넷 헤더 옵션 필드에는 여러 옵션이 포함될 수 있습니다.
각 옵션의 길이는 여러 옥텟일 수 있습니다.

심
인터넷 헤더 패딩 필드는 다음을 보장하는 데 사용됩니다.
데이터는 32비트 단어 경계에서 시작합니다. 패딩은 0입니다.

규약
이 문서에서는 다음으로 높은 레벨의 프로토콜 식별자를 사용합니다.
인터넷 헤더 필드.

나머지
인터넷 주소의 로컬 주소 부분입니다.

원천
소스 주소, 인터넷 헤더 필드.

TCP
전송 제어 프로토콜: 호스트 간 프로토콜
인터넷 환경에서의 안정적인 통신.

TCP 세그먼트
TCP 모듈(다음 포함) 간에 교환되는 데이터 단위
TCP 헤더).

TFTP
Trivial File Transfer Protocol: 간단한 파일 전송
UDP 기반으로 구축된 프로토콜입니다.

살아갈 시간
상한을 나타내는 인터넷 헤더 필드
이 인터넷 데이터그램이 얼마나 오랫동안 존재할 수 있는가.

이용 약관
서비스 유형

총 길이
인터넷 헤더 필드 총 길이는 길이입니다.
인터넷 헤더와 데이터를 포함하는 옥텟 단위의 데이터그램입니다.

TTL
살아갈 시간




                                                               [43페이지]

                                                          1981년 9월
인터넷 프로토콜
어휘



서비스 유형
유형(또는 품질)을 나타내는 인터넷 헤더 필드
이 인터넷 데이터그램에 대한 서비스입니다.

UDP
사용자 데이터그램 프로토콜: 트랜잭션을 위한 사용자 수준 프로토콜
지향적인 응용 프로그램.

사용자
인터넷 프로토콜 사용자입니다. 이는 더 높은 수준일 수 있습니다.
프로토콜 모듈, 애플리케이션 프로그램 또는 게이트웨이 프로그램입니다.

버전
버전 필드는 인터넷 헤더의 형식을 나타냅니다.